From d12e0bee44fe72c38d626377c4d8e0b496afc0ff Mon Sep 17 00:00:00 2001
From: GH Cao <driver1998@foxmail.com>
Date: Fri, 17 Jan 2020 18:19:20 +0800
Subject: [PATCH 2/3] x86 enable building on clang/MinGW

---
 src/win/Makefile.mingw     | 6 +++---
 src/win/Makefile_ndr.mingw | 4 ++--
 2 files changed, 5 insertions(+), 5 deletions(-)

diff --git a/src/win/Makefile.mingw b/src/win/Makefile.mingw
index 85e2850f..a35dc8e1 100644
--- a/src/win/Makefile.mingw
+++ b/src/win/Makefile.mingw
@@ -283,9 +283,9 @@ else
 TOOL_PREFIX     := i686-w64-mingw32-
 endif
 CPP             := ${TOOL_PREFIX}g++
-CC              := gcc
-WINDRES		:= windres
-STRIP		:= strip
+CC              := ${TOOL_PREFIX}gcc
+WINDRES		:= ${TOOL_PREFIX}windres
+STRIP		:= ${TOOL_PREFIX}strip
 ifeq ($(ARM64), y)
 CPP		:= aarch64-w64-mingw32-g++
 CC		:= aarch64-w64-mingw32-gcc
diff --git a/src/win/Makefile_ndr.mingw b/src/win/Makefile_ndr.mingw
index 6c6bd3e0..f507dc3b 100644
--- a/src/win/Makefile_ndr.mingw
+++ b/src/win/Makefile_ndr.mingw
@@ -287,8 +287,8 @@ TOOL_PREFIX     := i686-w64-mingw32-
 endif
 CPP             := ${TOOL_PREFIX}g++
 CC              := ${TOOL_PREFIX}gcc
-WINDRES		:= windres
-STRIP		:= strip
+WINDRES		:= ${TOOL_PREFIX}windres
+STRIP		:= ${TOOL_PREFIX}strip
 ifeq ($(ARM64), y)
 CPP		:= aarch64-w64-mingw32-g++
 CC		:= aarch64-w64-mingw32-gcc
-- 
2.17.1

